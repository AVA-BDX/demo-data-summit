version: "2.0"

rules:
- rule: go through ask_for_clarification function
  steps:
  - intent: faq
  - action: action_store_all_bot_responses
  - action: action_store_all_bot_questions
  - action: action_get_user_curent_intent
  - action: user_note_to_none
  - action: action_user_last_message
  - action: action_ask_for_clarification
  - action: action_bot_last_message
  - action: action_bot_utterances_list


- rule: confusion_1
  steps:
  - intent: confusion_1
  - action: action_set_faq_confusion_id
  - action: action_bot_adaptive_answer
  - action: action_bot_last_message
  - action: action_bot_utterances_list

- rule: confusion_2
  steps:
  - intent: confusion_2
  - action: action_set_faq_confusion_id
  - action: action_bot_adaptive_answer
  - action: action_bot_last_message
  - action: action_bot_utterances_list

- rule: non_sense
  steps:
  - intent: non_sense
  - action: action_set_faq_confusion_id
  - action: action_bot_adaptive_answer
  - action: action_bot_last_message
  - action: action_bot_utterances_list

- rule: the user want to inform bot on his profile, the bot ask profile
  steps:
  - intent: want_inform_profile
  - action: utter_ask_profil

- rule: user just inform on his profile = short_utters
  steps:
  - intent: short_utters
  - action: action_set_and_acknowledge_profile
  - action: action_bot_adaptive_answer

- rule: user just inform on his profile = dont_care
  steps:
  - intent: dont_care
  - action: action_set_and_acknowledge_profile
  - action: action_bot_adaptive_answer

- rule: user just inform on his profile = long_utters
  steps:
  - intent: long_utters
  - action: action_set_and_acknowledge_profile
  - action: action_bot_adaptive_answer

- rule: user just inform on his profile happy
  steps:
  - action: action_set_and_acknowledge_profile
  - action: action_bot_adaptive_answer
  - intent: affirm
  - action: utter_super


- rule: user just inform on his profile not unhappy
  steps:
  - action: action_set_and_acknowledge_profile
  - action: action_bot_adaptive_answer
  - intent: deny
  - action: utter_ask_profil

- rule: happy path, ask the user if he still want a response, user affirm
  steps:
  - action: action_utter_reformulate
  - action: action_bot_utterances_list
  - intent: affirm
  - action: action_no_further_reformulation

- rule: unhapppy path, ask the user if he still want a response, he deny
  steps:
  - action: action_utter_reformulate
  - action: action_bot_utterances_list
  - intent: deny
  - action: utter_ask_another_question

- rule: the bot reformulate any time the user ask him to reformulate
  steps:
  - intent: ask_reformulate
  - action: action_utter_reformulate
  - action: action_bot_utterances_list

- rule: use recommendation algorithme when user asks helpdesk intent
  steps:
  - intent: helpdesk
  - action: action_user_last_message
  - action: action_recommendation_algo


# - rule: The chatbot says it does not understand when it doesn't understand
#   steps:
#   - intent: nlu_fallback
#   - action: utter_dont_understand

- rule: send image at the begining of a session
  conversation_start: false
  steps:
  - action: action_session_start
  - action: action_restart